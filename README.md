### Project_2GIS_API

#### Структура проекта состоит из следующих файлов:

1. В корне проекта находится директория tests, которая содержит файлы с тестами.
2. В файле constants.py указан эндпоинт для отправки запросов и константы:
   2.1. Эндпоинт - класс Urls;
   2.2. Сообщения об ошибках - класс Message.
3. В файле requirements.txt указан перечень всех установленных библиотек.

Перед запуском проекта необходимо выполнить команду: pip3 install -r requirements.txt.

Запуск тестов выполняется командой: pytest -v tests.

#### Директория tests:

1. В файле test_get_all_regions.py - тесты на:
   1.1. Получение всех регионов;
   1.2. Проверку совместной работы всех параметров;
   1.3. Общее количестов полученных регионов;
   1.4. Изменение общего количества всех регионов total в зависимости от изменения регионов в списке items.
2. В файле test_query_param.py - тесты на проверку работы параметра query.
3. В файле test_country_code.py - тесты на проверку работы параметра country_code.
4. В файле test_page.py - тесты на проверку работы параметра page.
5. В файле test_page_size.py - тесты на проверку работы параметра page_size.

Для проверки эквивалентных тестовых данных используется параметризация.

Для каждого теста указано понятное название с помощью декоратора @allure.title.

Для тестов содержащих баги, добавлен декоратор @allure.issue, содержащий краткое описание конкретного бага.

Для формирования отчета о запуске тестов в формате веб-страницы необходимо воспользоваться командой: allure serve
allure_results.

#### Баг-репорт.

##### Общий BUG:

Всегда возвращается код 200, даже при возврате сообщения об ошибке.
На мой взгляд, код 200 говорит об успешном выполнении запроса.
Если же мы получаем сообщение об ошибке, логичнее возвращать код 400.
В итоге пришлось не всегда ставить проверку на статус код, для возможности проверки самого сообщения об ошибке.

##### BUGs in test_get_all_regions.py:

Количество регионов в списке items не совпадает со значением, указанным в total.
В процессе тестирования было обнаружено, что при переходе на следующую страницу, первый регион в списке совпадает с
последним регионом с предыдущей страницы.
В связи с этим общее количество регионов в списке items считается неверно: 23 вместо 21 (2 повторения).
Откуда взялось значение 22 в total - загадка.

Общее количество всех регионов total всегда равно 22, даже при указании каких-либо значений параметров.
Более логично, если значение total будет меняться в зависимости от длины списка items.

##### BUGs in test_query_param.py:

При указании пустого значения для параметра q (q=), с сервера приходит код ответа 500, вместо кода 400 и сообщения об
ошибке.
Код ответа 500 не очень правильно показывать пользователю.

В процессе тестирования возник вопрос: как искать регионы, названия которых состоят из 2х символов (например Ош)? Если,
согласно требованиям, параметр q должен быть НЕ менее 3х символов.

##### BUGs in test_country_code.py:

При указании кода kz отображаются еще и регионы с кодом kg и наоборот.

Согласно требованиям country_code может принимать значения: ru, cz, kz, kg. Однако, без проблем проходит тест с
указанием региона az. Регион az присутствует в списке items - это не ошибка?

##### BUGs in test_page.py:

Опечатка в сообщении об ошибке: "Параметр 'page' **длжен** быть целым числом".

При указании нулевого значения параметра page (page=0), с сервера приходит код ответа 500, вместо кода 400 и сообщения
об ошибке.
Код ответа 500 не очень правильно показывать пользователю.

##### BUGs in test_page_size.py:

Согласно требованиям, параметр page_size по умолчанию принимает значение 15. Однако, в процессе тестирования, было
обнаружено, что по умолчанию данный параметр равен 10.

Опечатка в сообщении об ошибке: "Параметр 'page_size' **длжен** быть целым числом".


